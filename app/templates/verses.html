<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ passage }} - ABLE Bible</title>
  <style>
    :root {
      --bg: #f8fafc;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --primary: #7c3aed;
      --border: #e2e8f0;
      --highlight: #f0f9ff;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0f172a;
        --card: #1e293b;
        --text: #f1f5f9;
        --muted: #94a3b8;
        --border: #334155;
        --highlight: #1e293b;
      }
    }

    body {
      font-family: system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    .back-link {
      display: inline-block;
      margin-bottom: 16px;
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }

    .top-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .search-view-btn {
      display: inline-block;
      color: white;
      background-color: var(--primary);
      padding: 8px 16px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.2s;
    }

    .search-view-btn:hover {
      opacity: 0.9;
      transform: translateY(-1px);
    }

    .verses-container {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px;
    }

    h2 {
      margin-top: 0;
      margin-bottom: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .translation-label {
      font-size: 0.9rem;
      font-weight: normal;
      color: var(--primary);
      padding: 2px 8px;
      background: var(--highlight);
      border-radius: 4px;
    }

    .verse {
      padding: 36px 0;  /* Extremely increased padding */
      border-bottom: 2px solid var(--border);
      cursor: pointer;
      margin-bottom: 40px; /* Even larger margin between verses */
      border-radius: 8px;
      position: relative; /* For positioning */
      transition: all 0.2s ease-in-out; /* Add transition for smooth hover effects */
    }
    
    .verse:last-child {
      border-bottom: none;
      margin-bottom: 0; /* No margin for last item */
    }
    
    /* Add visual separator between verses */
    .verse::after {
      content: "";
      height: 10px;
      position: absolute;
      bottom: -20px;
      left: 10%;
      right: 10%;
      border-bottom: 1px dashed var(--border);
      display: block;
    }
    
    .verse:last-child::after {
      display: none; /* Hide for last verse */
    }
    
    .verse:hover {
      background-color: rgba(124, 58, 237, 0.08); /* Lighter purple background with transparency */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border-left: 4px solid var(--primary); /* Left accent border */
      padding-left: 16px; /* Add padding to accommodate the left border */
    }
    
    .verse:hover .verse-number {
      color: var(--primary);
    }
    
    .verse:hover .verse-text {
      color: var(--text); /* Ensure text remains the default color for better visibility */
      font-weight: 500; /* Slightly bolder on hover */
    }
    
    .verse-number {
      font-weight: bold;
      margin-right: 12px; /* Increased spacing */
      color: var(--primary);
      font-size: 1.6rem; /* Increased from 1.3rem to match text size */
      display: inline-block;
      min-width: 28px;
    }
    
    .verse-text {
      line-height: 2.2; /* Even more increased line height */
      font-size: 1.6rem; /* Larger text size */
      letter-spacing: 0.01em; /* Slightly increased letter spacing for readability */
    }
    
    a {
      color: inherit;
      text-decoration: none;
    }
    
    /* Jesus text highlighting */
    jesus {
      color: red;
      font-weight: 500;
    }
    
    /* Emoji toggle styles */
    .toggle-container {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
      padding: 8px 12px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 6px;
      font-size: 0.9rem;
    }
    
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 24px;
      margin-right: 10px;
    }
    
    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 24px;
    }
    
    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .toggle-slider {
      background-color: var(--primary);
    }
    
    input:focus + .toggle-slider {
      box-shadow: 0 0 1px var(--primary);
    }
    
    input:checked + .toggle-slider:before {
      transform: translateX(24px);
    }
    
    /* Hide emojis when toggle is off */
    body.hide-emojis .verse-text {
      unicode-bidi: isolate;
      font-variant-emoji: no-emoji;
    }
    
    /* For browsers that don't support font-variant-emoji */
    body.hide-emojis .verse-text span.emoji {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="/" class="back-link">‚Üê Back</a>
    
    <div class="top-actions">
      <a href="/search?q={{ passage }}" class="search-view-btn">Compare All Verses</a>
    </div>
    
    <!-- Add emoji toggle -->
    <div class="toggle-container">
      <label class="toggle-switch">
        <input type="checkbox" id="emojiToggle" checked>
        <span class="toggle-slider"></span>
      </label>
      <span>Show Emojis</span>
    </div>
    
    <div class="verses-container">
      <!-- <h2>
        John 3:16-17
        <span class="translation-label">ABLE Bible</span>
      </h2>
      
      <a href="/search?q=John+3:16" class="verse">
        <span class="verse-number">16</span>
        <span class="verse-text">Jesus said, God's love is big. God gave His one Son, Jesus. If anyone trusts Him, they will not die. They will have life that lasts. üåç‚ù§Ô∏èüéÅüë∂‚úùÔ∏è‚è≥‚ôæÔ∏è</span>
      </a>
      
      <a href="/search?q=John+3:17" class="verse">
        <span class="verse-number">17</span>
        <span class="verse-text">Jesus said, God did not send Me to punish the world. God sent Me to save the world. üö´‚öñÔ∏è üåç ‚û°Ô∏è üõü‚ù§Ô∏è</span>
      </a> -->


      <!-- In verses.html, replace the static verses with this -->
      {% for verse in verses %}
      <a href="/search?q={{ verse.reference }}" class="verse">
        <span class="verse-number">{{ verse.verse_number }}</span>
        <span class="verse-text">{{ verse.text_able }}</span>
      </a>
      {% else %}
      <p class="muted">No verses found for the passage "{{ passage }}".</p>
      {% endfor %}

      {% if error %}
      <p class="error muted">{{ error }}</p>
      {% endif %}      
      
      <!-- More verses would be dynamically added here based on the passage requested -->
    </div>
  </div>

  <script>
  // Process Jesus tags in text
  function processJesusTags() {
    document.querySelectorAll('.verse-text').forEach(element => {
      const html = element.innerHTML;
      element.innerHTML = html.replace(
        /&lt;jesus&gt;(.*?)&lt;\/jesus&gt;/g,
        '<jesus>$1</jesjes>'
      );
    });
  }
  
  // Process emojis for better toggling
  function processEmojis() {
    document.querySelectorAll('.verse-text').forEach(element => {
      // This regex matches emoji characters
      const emojiRegex = /[\p{Emoji_Presentation}\p{Extended_Pictographic}]/gu;
      
      // Replace emojis with span-wrapped versions
      const html = element.innerHTML;
      element.innerHTML = html.replace(emojiRegex, match => 
        `<span class="emoji">${match}</span>`
      );
    });
  }

  // Toggle emoji visibility
  document.getElementById('emojiToggle').addEventListener('change', function() {
    document.body.classList.toggle('hide-emojis', !this.checked);
    
    // Save preference to localStorage
    localStorage.setItem('showEmojis', this.checked);
  });
  
  // Run on page load
  document.addEventListener('DOMContentLoaded', function() {
    processJesusTags();
    processEmojis();
    
    // Check saved preference
    const showEmojis = localStorage.getItem('showEmojis') !== 'false'; // Default to true
    document.getElementById('emojiToggle').checked = showEmojis;
    document.body.classList.toggle('hide-emojis', !showEmojis);
  });
  </script>
</body>
</html>
